(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{26:function(e,t,s){},64:function(e,t,s){},65:function(e,t,s){"use strict";s.r(t);var c=s(1),a=s.n(c),n=s(27),r=s.n(n),l=s(10),o=s(2),i=s(9),d=s.n(i),b=s(12),u=s(4),j=s(28),p=s(29),m=s(30),h=s.n(m),x=null,O=function(){function e(){Object(j.a)(this,e),x||(x=this);return this.client=h.a.create({baseURL:"https://engsoft-production-nmcardoso.cloud.okteto.net"}),x}return Object(p.a)(e,[{key:"setAuthToken",value:function(e){this.client.defaults.headers.common.Authorization="Bearer ".concat(e)}},{key:"removeAuthToken",value:function(){this.client.defaults.headers.common.Authorization=void 0}},{key:"login",value:function(e){var t=e.username,s=e.password;return this.client.post("/auth/login",{username:t,password:s})}},{key:"register",value:function(e){var t=e.username,s=e.password,c=e.nome,a=e.cpf,n=e.idUnidade;return this.client.post("/auth/register",{username:t,password:s,nome:c,cpf:a,id_unidade_saude:n})}},{key:"validateToken",value:function(){return this.client.get("/auth/validate")}},{key:"getUnidadeSaude",value:function(e){var t=e.campos,s=t?{campos:t.join(",")}:{};return this.client.get("/unidade_saude",{params:s})}},{key:"postFormulario",value:function(e){return this.client.post("/formulario",e)}}]),e}(),g=s(0),f=Object(c.createContext)();function v(e){var t=e.children,s=Object(c.useState)({user:null,session:null}),a=Object(u.a)(s,2),n=a[0],r=a[1],l=new O;function o(){return(o=Object(b.a)(d.a.mark((function e(t){var s,c,a,n,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.username,c=t.password,e.prev=1,e.next=4,l.login({username:s,password:c});case 4:o=e.sent,localStorage.setItem("auth",JSON.stringify({user:o.data.userInfo,session:{token:o.data.token,logged:!0}})),l.setAuthToken(o.data.token),a=o.data.message,n=o.data.success,r({user:o.data.userInfo,session:{token:o.data.token,logged:!0}}),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(1),a=e.t0.data.message,n=e.t0.data.success,r({user:null,session:{logged:!1}});case 17:return e.abrupt("return",{success:n,message:a});case 18:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}return Object(c.useEffect)((function(){var e=JSON.parse(localStorage.getItem("auth"));e&&(l.setAuthToken(e.session.token),r(e))}),[]),Object(g.jsx)(f.Provider,{value:{user:n.user,session:n.session,login:function(e){return o.apply(this,arguments)},logout:function(){localStorage.removeItem("auth"),l.removeAuthToken(),r({user:null,session:{logged:!1}})}},children:t})}function N(){return Object(c.useContext)(f)}s(26);var y=function(){var e=Object(c.useState)(""),t=Object(u.a)(e,2),s=t[0],a=t[1],n=Object(c.useState)(""),r=Object(u.a)(n,2),l=r[0],i=r[1],j=Object(c.useState)(""),p=Object(u.a)(j,2),m=p[0],h=p[1],x=Object(c.useState)(!1),O=Object(u.a)(x,2),f=O[0],v=O[1],y=Object(o.g)(),w=N(),k=w.login,S=(w.logout,w.user,function(){var e=Object(b.a)(d.a.mark((function e(t){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),v(!0),e.next=4,k({username:s,password:l});case 4:(c=e.sent).success?y.push("/dashboard"):(h(c.message),v(!1));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return Object(g.jsx)("div",{className:"limiter",children:Object(g.jsxs)("div",{className:"page-container",children:[Object(g.jsxs)("div",{className:"banner-wrapper d-none d-md-block",children:[Object(g.jsx)("div",{className:"gov-logo"}),Object(g.jsx)("div",{id:"particles-background"}),Object(g.jsx)("div",{id:"particles-foreground"})]}),Object(g.jsxs)("div",{className:"form-wrapper justify-content-center align-items-center",children:[Object(g.jsx)("div",{className:"vacivida-logo"}),Object(g.jsx)("div",{className:"fw-bolder mb-4",style:{fontSize:"2em"},children:"Entrar"}),!!m&&Object(g.jsxs)("div",{className:"alert alert-danger",style:{width:"400px"},role:"alert",children:[Object(g.jsx)("i",{className:"bi bi-exclamation-circle me-2"}),m]}),Object(g.jsxs)("form",{onSubmit:S,children:[Object(g.jsxs)("div",{className:"form-group",children:[Object(g.jsx)("label",{className:"fw-bolder",htmlFor:"exampleInputEmail1",children:"Usu\xe1rio"}),Object(g.jsx)("input",{type:"text",className:"form-control form-control-lg",id:"exampleInputEmail1","aria-describedby":"emailHelp",placeholder:"",onChange:function(e){return a(e.target.value)}})]}),Object(g.jsxs)("div",{className:"form-group",children:[Object(g.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(g.jsx)("label",{className:"fw-bolder",htmlFor:"exampleInputPassword1",children:"Senha"}),Object(g.jsx)("a",{href:"#",className:"text-decoration-none text-success fw-bold",children:"Esqueceu a senha?"})]}),Object(g.jsx)("input",{type:"password",className:"form-control form-control-lg",id:"exampleInputPassword1",placeholder:"",size:"30",onChange:function(e){return i(e.target.value)}})]}),Object(g.jsxs)("div",{className:"custom-control custom-checkbox mb-4 mx-3 my-2 align-middle",children:[Object(g.jsx)("input",{type:"checkbox",className:"custom-control-input",id:"customControlInline",size:"30"}),Object(g.jsx)("label",{className:"custom-control-label mx-1",htmlFor:"customControlInline",children:"Ficar logado?"})]}),f?Object(g.jsxs)("button",{className:"btn btn-success fw-bold py-2 px-3 mx-3",type:"submit",disabled:!0,children:[Object(g.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),"\xa0\xa0\xa0Autenticando..."]}):Object(g.jsx)("button",{type:"submit",className:"btn btn-success btn-block fw-bold py-2 px-3 mx-3",children:"Entrar"})]})]})]})})};var w=function(){var e=Object(c.useState)(""),t=Object(u.a)(e,2),s=t[0],a=t[1],n=Object(c.useState)(""),r=Object(u.a)(n,2),l=r[0],o=r[1],i=Object(c.useState)(""),j=Object(u.a)(i,2),p=j[0],m=j[1],h=Object(c.useState)(""),x=Object(u.a)(h,2),f=x[0],v=x[1],N=Object(c.useState)(null),y=Object(u.a)(N,2),w=y[0],k=y[1],S=Object(c.useState)({}),I=Object(u.a)(S,2),F=I[0],C=I[1],D=Object(c.useState)(!1),E=Object(u.a)(D,2),L=E[0],P=E[1],T=Object(c.useState)([]),A=Object(u.a)(T,2),U=A[0],z=A[1];return Object(c.useEffect)(Object(b.a)(d.a.mark((function e(){var t,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new O,e.next=3,t.getUnidadeSaude({campos:["id","nome"]});case 3:s=e.sent,z(s.data);case 5:case"end":return e.stop()}}),e)}))),[]),Object(g.jsx)("div",{className:"limiter",children:Object(g.jsxs)("div",{className:"page-container",children:[Object(g.jsxs)("div",{className:"banner-wrapper d-none d-md-block",children:[Object(g.jsx)("div",{className:"gov-logo"}),Object(g.jsx)("div",{id:"particles-background"}),Object(g.jsx)("div",{id:"particles-foreground"})]}),Object(g.jsxs)("div",{className:"form-wrapper justify-content-center align-items-center",children:[Object(g.jsx)("div",{className:"vacivida-logo"}),Object(g.jsx)("div",{className:"fw-bolder mb-4",style:{fontSize:"2em"},children:"Cadastro"}),!!F.value&&Object(g.jsxs)("div",{className:"error"==F.type?"alert alert-danger":"alert alert-success",style:{width:"400px"},role:"alert",children:["error"==F.type?Object(g.jsx)("i",{class:"bi bi-exclamation-circle me-2"}):Object(g.jsx)("i",{class:"bi bi-check-circle me-2"}),F.value]}),Object(g.jsxs)("form",{onSubmit:function(e){e.preventDefault(),P(!0),(new O).register({username:p,password:f,nome:s,cpf:l,idUnidade:w}).then((function(e){e.data.success?(C({value:e.data.message,type:"success"}),P(!1)):(C({value:e.data.message,type:"error"}),P(!1))})).catch((function(e){C({value:e.response.data.message,type:"error"}),P(!1)}))},children:[Object(g.jsxs)("div",{className:"form-group",children:[Object(g.jsx)("label",{className:"fw-bolder",htmlFor:"exampleInputName",children:"Nome"}),Object(g.jsx)("input",{type:"text",className:"form-control form-control-lg",id:"exampleInputName",placeholder:"",onChange:function(e){return a(e.target.value)}})]}),Object(g.jsxs)("div",{className:"form-group",children:[Object(g.jsx)("label",{className:"fw-bolder",htmlFor:"exampleInputCPF",children:"CPF"}),Object(g.jsx)("input",{type:"text",className:"form-control form-control-lg",id:"exampleInputCPF",placeholder:"",onChange:function(e){return o(e.target.value)}})]}),Object(g.jsxs)("div",{className:"form-group",children:[Object(g.jsx)("label",{className:"fw-bolder",htmlFor:"exampleInputEmail1",children:"Usu\xe1rio"}),Object(g.jsx)("input",{type:"text",className:"form-control form-control-lg",id:"exampleInputEmail1","aria-describedby":"emailHelp",placeholder:"",onChange:function(e){return m(e.target.value)}})]}),Object(g.jsxs)("div",{className:"form-group",children:[Object(g.jsx)("div",{className:"d-flex justify-content-between",children:Object(g.jsx)("label",{className:"fw-bolder",htmlFor:"exampleInputPassword1",children:"Senha"})}),Object(g.jsx)("input",{type:"password",className:"form-control form-control-lg",id:"exampleInputPassword1",placeholder:"",size:"30",onChange:function(e){return v(e.target.value)}})]}),Object(g.jsxs)("div",{className:"form-group",children:[Object(g.jsx)("label",{className:"fw-bolder",htmlFor:"exampleInputUnidade",children:"Unidade"}),Object(g.jsxs)("select",{className:"form-select",onChange:function(e){return k(parseInt(e.target.value))},disabled:0===U.length,defaultValue:"-1",children:[0===U.length?Object(g.jsx)("option",{value:"-1",children:"Carregando..."}):null,U.map((function(e){return Object(g.jsx)("option",{value:e.id,children:e.nome},e.id)}))]})]}),L?Object(g.jsxs)("button",{className:"btn btn-success btn-lg btn-block fw-bold py-3 px-3 mx-1 my-3",type:"submit",disabled:!0,children:[Object(g.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),"\xa0\xa0\xa0Solicitando..."]}):Object(g.jsx)("button",{type:"submit",className:"btn btn-success btn-lg btn-block fw-bold py-3 px-3 mx-1 my-3",children:"Cadastrar"})]})]})]})})},k=s.p+"static/media/logo_vacivida.c4caa297.png";var S=function(){return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)("div",{className:"d-flex align-items-center justify-content-center vh-100 vw-100",children:Object(g.jsxs)("div",{children:[Object(g.jsx)("img",{src:k,width:"250px"}),Object(g.jsxs)("div",{className:"mt-5 d-flex justify-content-around",style:{width:"250px"},children:[Object(g.jsx)(l.b,{to:"/login",className:"btn btn-success btn-block fw-bold",children:"Login"}),Object(g.jsx)(l.b,{to:"/register",className:"btn btn-success btn-block fw-bold",children:"Cadastro"}),Object(g.jsx)(l.b,{to:"/powerbi",className:"btn btn-success btn-block fw-bold",children:"PowerBI"})]})]})})})};s(64);var I=function(){var e=N().user;return Object(g.jsx)("div",{className:"d-flex align-items-center justify-content-center vh-100 vw-100",children:e&&0===Object.keys(e).length&&e.constructor===Object?Object(g.jsx)("div",{role:"status",className:"spinner-grow text-success",style:{width:"3rem",height:"3rem"},children:Object(g.jsx)("span",{className:"visually-hidden",children:"Carregando..."})}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("div",{className:"fadeOut",children:["Bem Vindo, ",Object(g.jsxs)("b",{children:["Usu\xe1rio ",e.nome]})]}),Object(g.jsxs)("div",{className:"fadeIn",children:[Object(g.jsxs)("div",{className:"buttonContainer d-block my-3",children:[Object(g.jsx)("button",{className:"btn btn-light btn-lg fw-bold py-4 px-3 rounded-pill border border-success mx-2 border-3",children:"Formul\xe1rio \ud83d\udd8a"}),Object(g.jsx)("button",{className:"btn btn-light btn-lg fw-bold py-4 px-3 rounded-pill border border-success mx-2 border-3",children:"An\xe1lise \ud83d\udcca"}),Object(g.jsx)("button",{className:"btn btn-light btn-lg fw-bold py-4 px-3 rounded-pill border border-success mx-2 border-3",children:"Feedback \ud83d\udd01"})]}),Object(g.jsxs)("div",{class:"input-group input-group-lg mb-3 px-5 ",children:[Object(g.jsx)("span",{class:"input-group-text",id:"basic-addon1",children:"Nome Paciente"}),Object(g.jsx)("input",{type:"text",class:"form-control",placeholder:"Nome paciente","aria-label":"Nome","aria-describedby":"campo-nome"})]}),Object(g.jsxs)("div",{class:"input-group input-group-lg mb-3 px-5",children:[Object(g.jsx)("span",{class:"input-group-text",id:"basic-addon1",children:"Data de nascimento"}),Object(g.jsx)("input",{type:"date",class:"form-control",placeholder:"data","aria-label":"Data de nascimento","aria-describedby":"campo-data"})]}),Object(g.jsxs)("div",{class:"input-group input-group-lg mb-3 px-5",children:[Object(g.jsx)("span",{class:"input-group-text",id:"basic-addon1",children:"CPF"}),Object(g.jsx)("input",{type:"text",class:"form-control",placeholder:"CPF","aria-label":"N\xfamero CPF","aria-describedby":"campo-cpf"})]}),Object(g.jsxs)("div",{class:"input-group input-group-lg mb-3 px-5",children:[Object(g.jsx)("span",{class:"input-group-text",id:"basic-addon1",children:"Telefone com DDD"}),Object(g.jsx)("input",{type:"text",class:"form-control",placeholder:"Tel","aria-label":"Telefone","aria-describedby":"campo-telefone"})]}),Object(g.jsxs)("div",{class:"input-group input-group-lg mb-3 px-5",children:[Object(g.jsx)("span",{class:"input-group-text",id:"basic-addon1",children:"Laborat\xf3rio"}),Object(g.jsx)("button",{class:"btn btn-light dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false",children:"Escolher"}),Object(g.jsxs)("ul",{class:"dropdown-menu",children:[Object(g.jsx)("li",{children:"Action"}),Object(g.jsx)("li",{children:Object(g.jsx)("a",{class:"dropdown-item",href:"#",children:"Another action"})}),Object(g.jsx)("li",{children:Object(g.jsx)("a",{class:"dropdown-item",href:"#",children:"Something else here"})}),Object(g.jsx)("li",{children:Object(g.jsx)("a",{class:"dropdown-item",href:"#",children:"Separated link"})})]})]}),Object(g.jsxs)("div",{class:"input-group input-group-lg mb-3 px-5",children:[Object(g.jsx)("span",{class:"input-group-text",id:"basic-addon1",children:"Lote"}),Object(g.jsx)("input",{type:"text",class:"form-control",placeholder:"Lote","aria-label":"Lote","aria-describedby":"campo-lote"})]}),Object(g.jsxs)("div",{class:"input-group input-group-lg mb-3 px-5",children:[Object(g.jsx)("span",{class:"input-group-text",id:"basic-addon1",children:"Dose"}),Object(g.jsxs)("div",{className:"input-group-text",children:[Object(g.jsx)("input",{class:"form-check-input mt-0",type:"checkbox",id:"primeira_dose","aria-label":"Dose","aria-describedby":"campo-dose"}),Object(g.jsx)("label",{htmlFor:"primeira_dose",children:"1\xaa dose"}),Object(g.jsx)("input",{class:"form-check-input mt-0 mx-3",type:"checkbox",id:"primeira_dose","aria-label":"Dose","aria-describedby":"campo-dose"}),Object(g.jsx)("label",{htmlFor:"primeira_dose",children:"2\xaa dose"})]})]})]})]})})};var F=function(){return Object(g.jsx)("iframe",{width:"100%",height:"100%",src:"https://app.powerbi.com/view?r=eyJrIjoiOWQ1MTcyYjgtY2E3Yy00Y2NlLTgzYzgtMGVmYWFmZGJmZDI1IiwidCI6IjdlOTNlMjg2LWIyOWEtNDQ1NC1hNDFhLWU4NDE5ZWM5ZGViNSJ9",frameBorder:"0",allowFullScreen:!0})};var C=function(e){var t=e.children,s=e.ifLogged,c=e.to,a=N().session;return Object(g.jsx)(g.Fragment,{children:(null===a||void 0===a?void 0:a.logged)&&s||!(null===a||void 0===a?void 0:a.logged)&&!s?Object(g.jsx)(o.a,{to:c}):t})};var D=function(){return Object(g.jsx)(v,{children:Object(g.jsx)(l.a,{children:Object(g.jsxs)(o.d,{children:[Object(g.jsx)(o.b,{exact:!0,path:"/",children:Object(g.jsx)(S,{})}),Object(g.jsx)(o.b,{path:"/login",children:Object(g.jsx)(C,{ifLogged:!0,to:"/dashboard",children:Object(g.jsx)(y,{})})}),Object(g.jsx)(o.b,{path:"/register",children:Object(g.jsx)(C,{ifLogged:!0,to:"/dashboard",children:Object(g.jsx)(w,{})})}),Object(g.jsx)(o.b,{path:"/dashboard",children:Object(g.jsx)(C,{ifLogged:!1,to:"/login",children:Object(g.jsx)(I,{})})}),Object(g.jsx)(o.b,{path:"/powerbi",children:Object(g.jsx)(C,{ifLogged:!1,to:"/login",children:Object(g.jsx)(F,{})})})]})})})};r.a.render(Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsx)(D,{})}),document.getElementById("root"))}},[[65,1,2]]]);
//# sourceMappingURL=main.8ef8e024.chunk.js.map